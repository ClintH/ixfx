var L=Object.defineProperty;var R=(t,e,r)=>e in t?L(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var u=(t,e,r)=>(R(t,typeof e!="symbol"?e+"":e,r),r),g=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var s=(t,e,r)=>(g(t,e,"read from private field"),r?r.call(t):e.get(t)),d=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},n=(t,e,r,c)=>(g(t,e,"write to private field"),c?c.call(t,r):e.set(t,r),r);import{S as j}from"./Events.084fe32f.js";import{l as M}from"./log.b4e81f74.js";import{a as p,p as y,c as E,b as w,g as b,h as k}from"./vendor.7c3c5fb6.js";import"./ShadowDom.fdb125f9.js";var o,l;class O extends j{constructor(e=void 0){super();d(this,o,void 0);d(this,l,void 0);n(this,o,new Map),e===void 0&&(e=r=>{if(r===void 0)throw new Error("Cannot create key for undefined");return typeof r=="string"?r:JSON.stringify(r)}),n(this,l,e)}clear(){s(this,o).clear(),this.fireEvent("change",void 0)}keys(){return s(this,o).keys()}values(){return s(this,o).values()}toArray(){return Array.from(s(this,o).entries())}frequencyOf(e){if(typeof e=="string")return s(this,o).get(e);const r=s(this,l).call(this,e);return s(this,o).get(r)}add(...e){if(e===void 0)throw new Error("value parameter is undefined");e.map(s(this,l)).forEach(c=>{const A=s(this,o).get(c)??0;s(this,o).set(c,A+1)}),this.fireEvent("change",void 0)}}o=new WeakMap,l=new WeakMap;const C=(t,e)=>Math.round(e/(Math.random()*e+t)),F=(t=!1)=>y(t?w(b):b,E(e=>e[0])),H=(t=!1)=>y(t?w(k):k,E(e=>e[1])),S=(t=!1)=>p(F(t)),I=(t=!1)=>p(H(t));var i;class N{constructor(e){u(this,"parentEl");u(this,"el");d(this,i,void 0);console.log("FreqHistoPlot"),this.parentEl=e,this.init()}setAutoSort(e){switch(e){case"value":n(this,i,I(!1));break;case"valueReverse":n(this,i,I(!0));break;case"key":n(this,i,S(!1));break;case"keyReverse":n(this,i,S(!0));break;default:throw new Error(`Unknown sorting value '${e}'. Expecting: value, valueReverse, key or keyReverse`)}}clear(){this.el!==void 0&&(this.el.data=[])}init(){this.el===void 0&&(this.el=document.createElement("histogram-vis"),this.parentEl.appendChild(this.el))}dispose(){const e=this.el;e!==void 0&&e.remove()}update(e){this.el!==void 0&&(s(this,i)!==void 0?this.el.data=s(this,i).call(this,e):this.el.data=[...e])}}i=new WeakMap;const a=M("#dataStream",{capacity:8,timestamp:!1}),h=new O,f=new N(document.getElementById("dataPlot"));f.setAutoSort("valueReverse");let v=200;f.init();let m=0;h.addEventListener("change",()=>{f.update(h.toArray())});const B=()=>{a.log("Start"),a.log(),m=window.setInterval(()=>{v--;const t=C(1,100).toString();h.add(t),a.log(t.toString()),v<=0&&q()},1e3)},q=()=>{m!==0&&(a.log("Stop"),a.log(),v=200,window.clearInterval(m))},P=()=>{h.clear(),a.log()};document.getElementById("btnStart").addEventListener("click",B);document.getElementById("btnStop").addEventListener("click",q);document.getElementById("btnClear").addEventListener("click",P);B();
