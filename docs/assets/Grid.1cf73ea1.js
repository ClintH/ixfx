var u=Object.defineProperty;var g=(t,e,r)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var a=(t,e,r)=>(g(t,typeof e!="symbol"?e+"":e,r),r);const N=(t,e="Point")=>{if(t===void 0)throw new Error(`'${e}' is undefined. Expected {x,y} got ${JSON.stringify(t)}`);if(t===null)throw new Error(`'${e}' is null. Expected {x,y} got ${JSON.stringify(t)}`);if(t.x===void 0)throw new Error(`'${e}.x' is undefined. Expected {x,y} got ${JSON.stringify(t)}`);if(t.y===void 0)throw new Error(`'${e}.y' is undefined. Expected {x,y} got ${JSON.stringify(t)}`);if(typeof t.x!="number")throw new Error(`'${e}.x' must be a number`);if(typeof t.y!="number")throw new Error(`'${e}.y' must be a number`);if(Number.isNaN(t.x))throw new Error(`'${e}.x' is NaN`);if(Number.isNaN(t.y))throw new Error(`'${e}.y' is NaN`)};var c;(function(t){t[t.DiscardOlder=0]="DiscardOlder",t[t.DiscardNewer=1]="DiscardNewer",t[t.DiscardAdditions=2]="DiscardAdditions"})(c||(c={}));const d=(t,e,r)=>{const n=e.length+r.length,o=t.overflowPolicy??2,s=t.capacity??n,i=n-s;switch(t.debug&&console.log(`Stack.push: stackLen: ${e.length} potentialLen: ${n} toRemove: ${i} policy: ${c[o]}`),o){case 2:return t.debug&&console.log(`Stack.push:DiscardAdditions: stackLen: ${e.length} slice: ${n-s} toAddLen: ${r.length}`),e.length===t.capacity?e:[...e,...r.slice(0,r.length-i)];case 1:return i>=e.length?r.slice(Math.max(0,r.length-s),Math.min(r.length,s)+1):(t.debug&&console.log(` from orig: ${e.slice(0,i-1)}`),[...e.slice(0,i-1),...r.slice(0,Math.min(r.length,s-i+1))]);case 0:return[...e,...r].slice(i);default:throw new Error(`Unknown overflow policy ${o}`)}},f=(t,e,...r)=>{const n=e.length+r.length;return t.capacity&&n>t.capacity?d(t,e,r):[...e,...r]},p=(t,e)=>{if(e.length===0)throw new Error("Stack is empty");return e.slice(0,e.length-1)},w=(t,e)=>e[e.length-1],y=(t,e)=>e.length===0,$=(t,e)=>t.capacity?e.length>=t.capacity:!1;class h{constructor(e,r){a(this,"opts");a(this,"data");this.opts=e,this.data=r}push(...e){return new h(this.opts,f(this.opts,this.data,...e))}pop(){return new h(this.opts,p(this.opts,this.data))}forEach(e){this.data.forEach(e)}forEachFromTop(e){[...this.data].reverse().forEach(e)}get isEmpty(){return y(this.opts,this.data)}get isFull(){return $(this.opts,this.data)}get peek(){return w(this.opts,this.data)}get length(){return this.data.length}}const x=(t={},...e)=>new h({...t},[...e]);var l;(function(t){t[t.DiscardOlder=0]="DiscardOlder",t[t.DiscardNewer=1]="DiscardNewer",t[t.DiscardAdditions=2]="DiscardAdditions"})(l||(l={}));Object.freeze(["n","ne","nw","e","s","se","sw","w"]);Object.freeze(["n","e","s","w"]);export{N as g,x as s};
